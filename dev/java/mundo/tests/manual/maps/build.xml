<project name="RMCTest" default="compile" basedir=".">
  <property file="../../../config/build.properties"/>

  <property name="src" location="src"/>
  <property name="build" location="bin"/>
  <property name="mcc" value="../../../bin/mcc"/>

  <target name="init">
    <mkdir dir="${build}"/>
  </target>

  <target name="preprocess" depends="init">
    <apply executable="${mcc}" parallel="true">
      <arg value="-I${src}" />
      <arg value="-O${build}" />
      <arg value="-x" />
      <fileset dir="${src}">
         <include name="**/*.java" />
      </fileset>
    </apply>
  </target>

  <target name="compile" depends="preprocess">
    <javac srcdir="${src}" destdir="${build}">
      <classpath>
        <pathelement path="${mcroot}/lib/mundocore.jar"/>
        <pathelement path="${junit}"/>
      </classpath>
      <src path="${src}" />
      <src path="${build}" />
    </javac>
  </target>

  <target name="run">
    <java classname="basic.ParamTypesClient" fork="true">
      <classpath>
        <pathelement location="classes"/>
        <pathelement path="../../lib/mundocore.jar"/>
        <pathelement path="${junit}"/>
      </classpath>
    </java>
  </target>
</project>
